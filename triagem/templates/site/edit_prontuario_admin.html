{% extends 'site/headerBase.html' %}
{% load static %}

{% block title %}Editar Prontuário (Admin) - {{ paciente.nome }}{% endblock %}

{% block styles %}
    {# O headerBase.html já carrega os estilos globais. #}
    {# Este link adiciona APENAS os estilos específicos deste formulário. #}
    <link rel="stylesheet" href="{% static 'front/css/edit_prontuario.css' %}?v=3">
{% endblock %}


{% block content %}
<div class="page-wrapper">
    
    {# Você pode adicionar um botão "Voltar" aqui se quiser, similar ao da tela de perfil #}
    <a href="javascript:history.back()" class="btn-voltar">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M19 12H5"></path><polyline points="12 19 5 12 12 5"></polyline></svg>
        <span>Voltar</span>
    </a>

    <h1>Editar Dados Cadastrais (Admin)</h1>
    <h3 class="paciente-subtitle">Paciente: {{ paciente.nome }}</h3>
    <div class="form-container">
        <form method="post">
            {% csrf_token %}
            
            {{ form.non_field_errors }}

            <div class="form-section">
                <h4>Dados Pessoais</h4>
                
                <div class="form-grid">
                    <div class="form-field">
                        {{ form.nome.label_tag }}
                        {{ form.nome }}
                        {{ form.nome.errors }}
                    </div>
                    <div class="form-field">
                        {{ form.data_nascimento.label_tag }}
                        {{ form.data_nascimento }}
                        {{ form.data_nascimento.errors }}
                    </div>
                    <div class="form-field">
                        {{ form.sexo.label_tag }}
                        {{ form.sexo }}
                        {{ form.sexo.errors }}
                    </div>
                    <div class="form-field">
                        {{ form.cpf.label_tag }}
                        {{ form.cpf }}
                        {{ form.cpf.errors }}
                    </div>
                    <div class="form-field">
                        {{ form.convenio.label_tag }}
                        {{ form.convenio }}
                        {{ form.convenio.errors }}
                    </div>
                </div>
            </div>

            <div class="form-section">
                <h4>Informações do Responsável (Opcional)</h4>
                
                <div class="form-grid">
                    <div class="form-field">
                        {{ form.nome_responsavel.label_tag }}
                        {{ form.nome_responsavel }}
                        {{ form.nome_responsavel.errors }}
                    </div>
                    <div class="form-field">
                        {{ form.cpf_responsavel.label_tag }}
                        {{ form.cpf_responsavel }}
                        {{ form.cpf_responsavel.errors }}
                    </div>
                    <div class="form-field">
                        {{ form.telefone_responsavel.label_tag }}
                        {{ form.telefone_responsavel }}
                        {{ form.telefone_responsavel.errors }}
                    </div>
                </div>
            </div>
            
            <div class="form-section">
                <h4>Observações da Triagem</h4>
                
                <div class="form-field">
                    {{ form.observacoes.label_tag }}
                    {{ form.observacoes }}
                    {{ form.observacoes.errors }}
                </div>
            </div>

            <div class="form-actions">
                {# O botão "Voltar" acima torna este "Cancelar" um pouco redundante, #}
                {# mas o link explícito para 'mostrar' ainda é útil. #}
                <a href="{% url 'hosp:mostrar' pk=paciente.pk %}" class="button button-cancel">Cancelar</a>
                <button type="submit" class="button button-save">Salvar Alterações</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}


{% block scripts %}
    {# O headerBase.html já carrega os scripts globais. #}
    {# Adicione aqui scripts JS específicos para esta página, se necessário #}
    {# Ex: <script src="{% static 'js/form-masks.js' %}"></script> #}
{% endblock %}